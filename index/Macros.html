<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>15&nbsp;Macros</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">&#34479;&#40071;&#34573;&#30340;&#21338;&#23458;</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="The_Hy_Programming_Language.html" class="tocviewlink" data-pltdoc="x">The Hy Programming Language</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="The_Nature_of_Lisp.html" class="tocviewlink" data-pltdoc="x">The Nature of Lisp</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="The_Nature_of_Lisp__Cursor_Translated.html" class="tocviewlink" data-pltdoc="x">The Nature of Lisp, Cursor Translated</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="The_Nature_of_Lisp_Translated_.html" class="tocviewlink" data-pltdoc="x">The Nature of Lisp(Translated)</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="THE_ROBOT_AND_THE_BABY.html" class="tocviewlink" data-pltdoc="x">THE ROBOT AND THE BABY</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="What_is_Racket.html" class="tocviewlink" data-pltdoc="x">What is Racket</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="First_Racket_Program.html" class="tocviewlink" data-pltdoc="x">First Racket Program</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Basic_Grammar.html" class="tocviewlink" data-pltdoc="x">Basic Grammar</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Conditions_and_Procedures.html" class="tocviewlink" data-pltdoc="x">Conditions and Procedures</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="Lists.html" class="tocviewlink" data-pltdoc="x">Lists</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Recursion.html" class="tocviewlink" data-pltdoc="x">Recursion</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="High-Order_Functions.html" class="tocviewlink" data-pltdoc="x">High-<wbr></wbr>Order Functions</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="Vectors__Strings_and_Structures.html" class="tocviewlink" data-pltdoc="x">Vectors, Strings and Structures</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="quote.html" class="tocviewlink" data-pltdoc="x">quote</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Macros</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Language-Oriented_Programming.html" class="tocviewlink" data-pltdoc="x">Language-<wbr></wbr>Oriented Programming</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="Appendix.html" class="tocviewlink" data-pltdoc="x">Appendix</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="Cursor_s_Racket_Tutorial.html" class="tocviewlink" data-pltdoc="x">Cursor&rsquo;s Racket Tutorial</a></td></tr><tr><td align="right">19&nbsp;</td><td><a href="Eternal_Flame.html" class="tocviewlink" data-pltdoc="x">Eternal Flame</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.8</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="quote.html" title="backward to &quot;14 quote&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;蚯鲇蜍的博客&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Language-Oriented_Programming.html" title="forward to &quot;16 Language-Oriented Programming&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>15<tt>&nbsp;</tt><a name="(part._.Macros)"></a>Macros</h3><blockquote class="SubFlow"><p><div class="SIntrapara"><span style="font-style: italic">Thou art the heart of Lisp, the soul of its power,
With thy ability to extend, we can make it flower.</span></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="Smaller">&ndash;Cursor</span></p></td></tr></table></div></p></blockquote><p>&#25152;&#26377;Lisp&#31243;&#24207;&#37117;&#26159;&#21487;&#20197;&#34987;&#36716;&#21270;&#20026;&#21015;&#34920;&#30340;, &#36825;&#20063;&#26159;Lisp&#25226;&#20989;&#25968;&#25918;&#22312;&#25324;&#21495;&#37324;&#38754;&#30340;&#21407;&#22240;. &#36825;&#31181;&#30475;&#20284;&#21476;&#24618;&#30340;&#35821;&#27861;&#20351;&#24471;&#21015;&#34920;&#21487;&#20197;&#34987;&#36731;&#26131;&#22320;&#36716;&#21270;&#20026;&#31243;&#24207;. &#22914;&#26524;&#20320;&#20102;&#35299;Python&#25110;JS&#30340;&#35805;,
&#21487;&#33021;&#20250;&#24819;&#21040;eval&#20989;&#25968;. Racket&#30340;&#30830;&#25552;&#20379;&#20102;<span class="RktSym">eval</span>&#20989;&#25968;, &#20294;&#36825;&#36890;&#24120;&#19981;&#26159;&#25226;&#25968;&#25454;&#36716;&#21270;&#20026;&#31243;&#24207;&#30340;&#26041;&#24335;. &#23439;(Macro)&#26159;&#20027;&#35201;&#30340;&#26041;&#24335;, &#20063;&#26159;Lisp&#30340;&#26680;&#24515;.</p><p>&#22914;&#26524;&#20320;&#23398;&#36807;C&#30340;&#35805;, &#24212;&#35813;&#23545;&#23439;&#27604;&#36739;&#29087;&#24713;, &#20294;&#20004;&#20010;&#23439;&#30340;&#33021;&#21147;&#31616;&#30452;&#26159;&#22825;&#22756;&#20043;&#21035;. &#20043;&#25152;&#20197;C&#30340;&#23439;&#37027;&#20040;&#24369;, &#26159;&#22240;&#20026;&#23427;&#21482;&#36827;&#34892;&#31616;&#21333;&#30340;&#25991;&#26412;&#26367;&#25442;, &#32780;&#36825;&#26082;&#20302;&#25928;&#21448;&#40635;&#28902;. Lisp&#23439;&#26412;&#36136;&#19978;&#20063;&#26159;
&#31243;&#24207;&#29255;&#27573;&#30340;&#26367;&#25442;(&#21363;&#20803;&#32534;&#31243;, Meta Programming), &#20294;&#20854;&#33021;&#21147;&#26159;C&#23439;&#25152;&#36828;&#19981;&#21487;&#21363;&#30340;. &#20004;&#32773;&#30340;&#26680;&#24515;&#24046;&#21035;&#26159;: Lisp&#24182;&#19981;&#30495;&#27491;&#21306;&#20998;&#32534;&#35793;&#26102;&#21644;&#36816;&#34892;&#26102;, &#25152;&#35859;&#30340;&#23439;&#23601;&#26159;&#19968;&#20010;&#25509;&#21463;S-&#34920;&#36798;&#24335;,
&#36820;&#22238;S-&#34920;&#36798;&#24335;&#30340;&#20989;&#25968;. &#23427;&#26159;&#33021;&#23454;&#29616;"&#32534;&#35793;&#26102;"&#35745;&#31639;&#30340;.</p><p>Scheme(&#21253;&#25324;Racket)&#30340;&#23439;&#19982;&#20256;&#32479;Lisp&#23439;&#26377;&#19968;&#20123;&#21306;&#21035;. &#23427;&#20204;&#19981;&#25805;&#20316;&#21015;&#34920;&#24418;&#24335;&#30340;S-&#34920;&#36798;&#24335;, &#32780;&#26159;&#25805;&#20316;syntax-object. syntax-object&#21253;&#21547;&#20102;&#28304;&#20195;&#30721;&#20301;&#32622;&#31561;&#20803;&#25968;&#25454;, &#38500;&#27492;&#20197;&#22806;&#21644;
&#21015;&#34920;&#31561;&#31867;&#22411;&#21313;&#20998;&#30456;&#20284;.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktRdr">#'</span><span class="RktSym">a</span></td></tr><tr><td><p><span class="RktRes">#&lt;syntax:eval:1:0 a&gt;</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;syntax:eval:2:0 (+ 1 1)&gt;</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktRdr">#`</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;syntax:eval:3:0 (+ 3 3)&gt;</span></p></td></tr></table></blockquote></div></p><p>&#23439;&#36890;&#36807;<span class="RktSym">define-syntax</span>&#23450;&#20041;(&#36825;&#20010;&#35789;&#26159;&#19981;&#26159;&#26377;&#20123;&#29087;&#24713;?):</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktSym">racket</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define-syntax</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">senpai</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">args</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktVal">114514</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">senpai</span></td></tr><tr><td><p><span class="RktRes">114514</span></p></td></tr></table></blockquote></div></p><p>&#30475;&#36215;&#26469;&#23601;&#26159;C&#30340;#define senpai 114514. &#20294;&#23427;&#20204;&#23454;&#38469;&#19978;&#26159;&#26377;&#21306;&#21035;&#30340;:</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktSym">racket</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define-syntax</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">senpai</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">args</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktVal">114514</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktVal">114514</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">application: not a procedure;</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr">expected a procedure that can be applied to arguments</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">given: 114514</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">senpai</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">114514</span></p></td></tr></table></blockquote></div></p><p>&#24590;&#20040;&#22238;&#20107;&#21602;? &#35753;&#25105;&#20204;&#30475;&#19968;&#30475;&#36825;&#20010;&#20989;&#25968;&#25910;&#21040;&#30340;&#21442;&#25968;:</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktSym">racket</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define-syntax</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">senpai</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">args</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">writeln</span><span class="hspace">&nbsp;</span><span class="RktSym">args</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">#'</span><span class="RktVal">114514</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">senpai</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktOut">(#&lt;syntax:eval:3:0 (senpai)&gt;)</span></p></td></tr><tr><td><p><span class="RktRes">114514</span></p></td></tr></table></blockquote></div></p><p>&#21407;&#26469;senpai&#36825;&#20010;&#31526;&#21495;&#34987;&#32465;&#23450;&#20851;&#38190;&#23383;(Bind Keyword)&#20102;. &#24403;Macro Expander&#36935;&#21040;&#31526;&#21495;senpai&#25110;car&#20026;senpai&#30340;&#32467;&#26500;&#26102;, &#23427;&#23601;&#20250;&#25226;syntax-object&#20256;&#32473;&#23545;&#24212;&#30340;&#20989;&#25968;.</p><p>&#22914;&#27492;&#23439;&#30340;&#24037;&#20316;&#21407;&#29702;&#23601;&#24456;&#28165;&#26224;&#20102;: Macro Expander&#25226;&#31243;&#24207;&#36716;&#21270;&#20026;&#25968;&#25454;&#21518;&#20256;&#32473;&#23439;, &#23439;&#25226;&#25968;&#25454;&#25968;&#37327;&#21518;&#36716;&#21270;&#20250;&#31243;&#24207;&#20877;&#25554;&#22238;&#21435;. Common Lisp&#31561;Lisp&#26041;&#35328;&#20013;&#30340;&#23439;&#23601;&#26159;&#36825;&#20040;&#20570;&#30340;.</p><p>Racket&#20013;&#20320;&#20063;&#21487;&#20197;&#36825;&#20040;&#20570;, &#20294;&#36825;&#26679;&#27604;&#36739;&#40635;&#28902;; &#36824;&#26377;&#19968;&#20010;&#38382;&#39064;&#22312;&#20110;&#21517;&#23383;&#27745;&#26579;. &#32771;&#34385;&#19979;&#38754;&#30340;C&#23439;:</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"swap.c"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">e</span></span></font><span class="hspace">&nbsp;</span><span class="RktSym">SWAP</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktRdr">,</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">||</span></td></tr><tr><td><span class="RktPn">{</span><span class="hspace">&nbsp;</span><span class="RktSym">||</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">\</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">\</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">\</span><span class="RktPn">}</span></td></tr></table></blockquote></blockquote></blockquote><p>&#28982;&#21518;&#36825;&#20040;&#35843;&#29992;:</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"call.c"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">=</span></span></font><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">u</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="RktSym">SWAP</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="RktRdr">,</span><span class="RktSym">u</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr></table></blockquote></blockquote></blockquote><p>&#20320;&#20250;&#24471;&#21040;&#19968;&#20010;&#32534;&#35793;&#38169;&#35823;.</p><p>&#20026;&#20102;&#35299;&#20915;&#36825;&#20123;&#38382;&#39064;, Scheme&#23553;&#35013;&#20102;&#19968;&#20123;&#22522;&#20110;&#27169;&#24335;&#21305;&#37197;&#30340;&#23439;&#21019;&#24314;&#26041;&#24335;, &#20854;&#20013;&#26368;&#26041;&#20415;&#30340;&#26159;<span class="RktSym">syntax-rules</span>. &#27604;&#22914;, &#25105;&#20204;&#21487;&#20197;&#25226;when&#26500;&#36896;&#29992;&#23439;&#26469;&#23454;&#29616;:</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define-syntax</span><span class="hspace">&nbsp;</span><span class="RktSym">when</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">syntax-rules</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">_</span><span class="hspace">&nbsp;</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">test</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">void</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">when</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">"hello, "</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">"world"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktOut">hello, world</span></p></td></tr></table></blockquote></div></p><p>&#19978;&#38754;&#30340;_&#26159;&#36890;&#37197;&#31526;(Wildcard), &#21305;&#37197;&#20219;&#24847;&#27169;&#24335;&#32780;&#19981;&#25429;&#33719;. &#22240;&#20026;car&#24517;&#28982;&#26159;when, &#25152;&#20197;&#25105;&#20204;&#20351;&#29992;&#36890;&#37197;&#31526;.</p><p>...&#20195;&#34920;&#38646;&#20010;&#25110;&#22810;&#20010;&#27169;&#24335;, &#30456;&#24403;&#20110;&#27491;&#21017;&#37324;&#30340;*. &#27880;&#24847;&#23427;&#26159;&#19968;&#20010;&#21333;&#29420;&#30340;&#26631;&#35782;&#31526;, &#19981;&#21487;&#19982;&#20854;&#20182;&#21333;&#35789;&#36830;&#22312;&#19968;&#36215;.</p><p>syntax-rules&#21518;&#38754;&#30340;()&#30340;&#20869;&#23481;&#26159;&#23383;&#38754;&#20540;(Literal), &#22312;when&#30340;&#20363;&#23376;&#37324;&#27809;&#26377;&#29992;&#21040;. &#22914;&#26524;&#35201;&#20030;&#20363;&#30340;&#35805;, cond&#21644;case(&#23427;&#20204;&#20063;&#26159;&#23439;)&#20013;&#30340;else&#23601;&#26159;literal. &#20855;&#20307;&#30340;&#29992;&#27861;&#21487;&#20197;&#21442;&#32771;
#hyperlink["#" "&#23448;&#26041;&#23548;&#24341;"]</p><p>&#24456;&#22810;&#26102;&#20505;&#23439;&#21482;&#26377;&#19968;&#31181;&#27169;&#24335;, &#22240;&#27492;&#32534;&#35793;&#22120;&#20801;&#35768;&#20320;&#36825;&#20040;&#20889;:</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"define-syntax-rule.rkt"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><font class="badlink"><span class="RktModLink"><span class="RktMod">#lang</span></span></font><span class="hspace">&nbsp;</span><font class="badlink"><span class="RktModLink"><span class="RktSym">racket</span></span></font></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-syntax-rule</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">when</span><span class="hspace">&nbsp;</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">test</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">void</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><p>&#27492;&#22806;, Racket&#23439;&#36824;&#25903;&#25345;&#36882;&#24402;, &#36825;&#20351;&#24471;&#23427;&#33021;&#22788;&#29702;&#20219;&#24847;&#24773;&#20917;&#30340;&#35821;&#27861;. &#27604;&#22914;, &#25105;&#20204;&#21487;&#20197;&#25226;or&#29992;&#23439;&#23454;&#29616;:</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define-syntax</span><span class="hspace">&nbsp;</span><span class="RktSym">my-or</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">syntax-rules</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">_</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">_</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">_</span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="hspace">&nbsp;</span><span class="RktSym">e3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-or</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="hspace">&nbsp;</span><span class="RktSym">e3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-or</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">1</span></p></td></tr></table></blockquote></div></p><p>&#38500;&#20102;syntax-rules&#20197;&#22806;, Racket&#23439;&#36824;&#26377;&#35768;&#22810;&#39640;&#32423;&#21151;&#33021;, &#27604;&#22914;fender, identifier&#31561;, &#22312;&#27492;&#19981;&#19968;&#19968;&#36184;&#36848;.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="quote.html" title="backward to &quot;14 quote&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;蚯鲇蜍的博客&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Language-Oriented_Programming.html" title="forward to &quot;16 Language-Oriented Programming&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>